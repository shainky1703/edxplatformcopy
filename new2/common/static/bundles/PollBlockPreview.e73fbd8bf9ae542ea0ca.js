!function(t,s){for(var e in s)t[e]=s[e]}(window,webpackJsonp([33],{"./common/lib/xmodule/xmodule/js/src/poll/poll_main.js":function(t,s,e){(function(n,o){var i,l;i=[e("./node_modules/edx-ui-toolkit/src/js/utils/html-utils.js")],void 0!==(l=function(t){function s(t){var s;if(this.questionEl=n(t).find(".poll_question"),1!==this.questionEl.length)return void console.log("ERROR: PollMain constructor requires one question DOM element.");if("true"===this.questionEl.attr("poll_main_processed"))return void console.log("ERROR: PolMain JS constructor was called on a DOM element that has already been processed once.");this.questionEl.attr("poll_main_processed","true"),s=this,this.wrapperSectionEl=null,function(t,e){for(;"body"!==t.tagName.toLowerCase();){if(t=n(t).parent()[0],e+=1,"div"===t.tagName.toLowerCase()&&"wrapper"===n(t).data("block-type")){s.wrapperSectionEl=t;break}if(e>50)break}}(n(t)[0],0);try{return this.jsonConfig=JSON.parse(this.questionEl.children(".poll_question_div").html()),void n.postWithPrefix(this.questionEl.data("ajax-url")+"/get_state",{},function(t){s.jsonConfig.poll_answer=t.poll_answer,s.jsonConfig.total=t.total,n.each(t.poll_answers,function(t,e){s.jsonConfig.poll_answers[t]=e}),s.questionEl.children(".poll_question_div").html(JSON.stringify(s.jsonConfig)),s.postInit()})}catch(t){return void console.log('ERROR: Invalid JSON config for poll ID "'+this.id+'".','Error messsage: "'+t.message+'".')}}return s.prototype={showAnswerGraph:function(s,e){var o,i;i=parseFloat(e),!1!==isFinite(i)&&(o=this,n.each(s,function(s,e){var n,l;n=parseFloat(e),!1!==isFinite(n)&&(l=n/i*100,o.answersObj[s].statsEl.show(),o.answersObj[s].numberEl.html(t.HTML(e+" ("+l.toFixed(1)+"%)").toString()),o.answersObj[s].percentEl.css({width:l.toFixed(1)+"%"}))}))},submitAnswer:function(t,s){var e;!0!==this.questionAnswered&&(this.questionAnswered=!0,e=this,console.log("submit answer"),s.buttonEl.addClass("answered"),n.postWithPrefix(e.ajax_url+"/"+t,{},function(t){console.log("success! response = "),console.log(t),e.showAnswerGraph(t.poll_answers,t.total),!0===e.canReset&&e.resetButton.show(),null!==e.wrapperSectionEl&&n(e.wrapperSectionEl).find(".xmodule_ConditionalModule").each(function(t,s){new window.Conditional(s,e.id.replace(/^poll_/,""))})}))},submitReset:function(){var t;t=this,console.log("submit reset"),n.postWithPrefix(this.ajax_url+"/reset_poll",{},function(s){console.log("success! response = "),console.log(s),!0===s.hasOwnProperty("status")&&"string"==typeof s.status&&"success"===s.status.toLowerCase()&&(t.questionAnswered=!1,t.questionEl.find(".button.answered").removeClass("answered"),t.questionEl.find(".stats").hide(),t.resetButton.hide(),null!==t.wrapperSectionEl&&n(t.wrapperSectionEl).find(".xmodule_ConditionalModule").each(function(s,e){new window.Conditional(e,t.id.replace(/^poll_/,""))}))})},postInit:function(){var s;if(s=this,this.jsonConfig.poll_answer.length>0&&!1===this.jsonConfig.answers.hasOwnProperty(this.jsonConfig.poll_answer))return void t.append(this.questionEl,t.joinHtml(t.HTML("<h3>Error!</h3>"),t.HTML("<p>XML data format changed. List of answers was modified, but poll data was not updated.</p>")));this.id=this.questionEl.attr("id"),this.ajax_url=this.questionEl.data("ajax-url"),this.questionHtmlMarkup=n("<div />").html(t.HTML(this.jsonConfig.question).toString()).text(),this.questionEl.append(t.HTML(this.questionHtmlMarkup).toString()),this.questionAnswered=!1,this.answersObj={},this.shortVersion=!0,n.each(this.jsonConfig.answers,function(t,e){e.length>=18&&(s.shortVersion=!1)}),n.each(this.jsonConfig.answers,function(e,i){var l;l={},s.answersObj[e]=l,l.el=n('<div class="poll_answer"></div>'),l.questionEl=n('<div class="question"></div>'),l.buttonEl=n('<div class="button"></div>'),l.textEl=n('<div class="text"></div>'),l.questionEl.append(t.HTML(l.buttonEl).toString()),l.questionEl.append(t.HTML(l.textEl).toString()),l.el.append(t.HTML(l.questionEl).toString()),l.statsEl=n('<div class="stats"></div>'),l.barEl=n('<div class="bar"></div>'),l.percentEl=n('<div class="percent"></div>'),l.barEl.append(t.HTML(l.percentEl).toString()),l.numberEl=n('<div class="number"></div>'),l.statsEl.append(t.HTML(l.barEl).toString()),l.statsEl.append(t.HTML(l.numberEl).toString()),l.statsEl.hide(),l.el.append(t.HTML(l.statsEl).toString()),l.textEl.html(t.HTML(i).toString()),!0===s.shortVersion&&n.each(l,function(t,s){s instanceof o&&s.addClass("short")}),l.el.appendTo(s.questionEl),l.textEl.on("click",function(){s.submitAnswer(e,l)}),l.buttonEl.on("click",function(){s.submitAnswer(e,l)}),e===s.jsonConfig.poll_answer&&(l.buttonEl.addClass("answered"),s.questionAnswered=!0)}),console.log(this.jsonConfig.reset),"string"==typeof this.jsonConfig.reset&&"true"===this.jsonConfig.reset.toLowerCase()?(this.canReset=!0,this.resetButton=n('<div class="button reset-button">Change your vote</div>'),!1===this.questionAnswered&&this.resetButton.hide(),t.append(this.questionEl,this.resetButton),this.resetButton.on("click",function(){s.submitReset()})):this.canReset=!1,!0===this.questionAnswered&&this.showAnswerGraph(this.jsonConfig.poll_answers,this.jsonConfig.total)}},s}.apply(s,i))&&(t.exports=l)}).call(s,e(0),e(0))},"./common/static/xmodule/modules/js/001-3918b2d4f383c04fed8227cc9f523d6e.js":function(t,s,e){(function(t){(function(){(function(){"use strict";this.JavascriptLoader=function(){function s(){}return s.executeModuleScripts=function(s,e){var n,o,i,l,r;return e||(e=null),r=s.find(".script_placeholder"),0===r.length?(null!==e&&e(),[]):(o=function(){var t,s,e;for(e=[],t=1,s=r.length;s>=1?t<=s:t>=s;s>=1?++t:--t)e.push(!1);return e}(),n=!1,i=function(t){return function(){var s,i,l;for(s=!0,o[t]=!0,i=0,l=o.length;i<l;i++)if(!o[i]){s=!1;break}if(s&&!n&&(n=!0,null!==e))return e()}},l={},r.each(function(s,e){var n,o;return o=t(e).attr("data-src"),o in l?i(s)():(l[o]=!0,n=document.createElement("script"),n.setAttribute("src",o),n.setAttribute("type","text/javascript"),n.onload=i(s),t("head")[0].appendChild(n)),t(e).remove()}))},s}()}).call(this)}).call(window)}).call(s,e(0))},"./common/static/xmodule/modules/js/002-8b615179a51250c4dc203f1daa97be63.js":function(t,s,e){var n,o;(function(){n=[e("./common/lib/xmodule/xmodule/js/src/poll/poll_main.js")],void 0!==(o=function(t){"use strict";function s(s){return new t(s)}return window.Poll=s,s}.apply(s,n))&&(t.exports=o)}).call(window)},"./common/static/xmodule/modules/js/003-e9bdd6eeb6d44351f9504a2e45b3fa98.js":function(t,s,e){(function(n,o){var i,l;(function(){i=[e("./node_modules/edx-ui-toolkit/src/js/utils/html-utils.js")],void 0!==(l=function(t){function s(t){var s;if(this.questionEl=n(t).find(".poll_question"),1!==this.questionEl.length)return void console.log("ERROR: PollMain constructor requires one question DOM element.");if("true"===this.questionEl.attr("poll_main_processed"))return void console.log("ERROR: PolMain JS constructor was called on a DOM element that has already been processed once.");this.questionEl.attr("poll_main_processed","true"),s=this,this.wrapperSectionEl=null,function(t,e){for(;"body"!==t.tagName.toLowerCase();){if(t=n(t).parent()[0],e+=1,"div"===t.tagName.toLowerCase()&&"wrapper"===n(t).data("block-type")){s.wrapperSectionEl=t;break}if(e>50)break}}(n(t)[0],0);try{return this.jsonConfig=JSON.parse(this.questionEl.children(".poll_question_div").html()),void n.postWithPrefix(this.questionEl.data("ajax-url")+"/get_state",{},function(t){s.jsonConfig.poll_answer=t.poll_answer,s.jsonConfig.total=t.total,n.each(t.poll_answers,function(t,e){s.jsonConfig.poll_answers[t]=e}),s.questionEl.children(".poll_question_div").html(JSON.stringify(s.jsonConfig)),s.postInit()})}catch(t){return void console.log('ERROR: Invalid JSON config for poll ID "'+this.id+'".','Error messsage: "'+t.message+'".')}}return s.prototype={showAnswerGraph:function(s,e){var o,i;i=parseFloat(e),!1!==isFinite(i)&&(o=this,n.each(s,function(s,e){var n,l;n=parseFloat(e),!1!==isFinite(n)&&(l=n/i*100,o.answersObj[s].statsEl.show(),o.answersObj[s].numberEl.html(t.HTML(e+" ("+l.toFixed(1)+"%)").toString()),o.answersObj[s].percentEl.css({width:l.toFixed(1)+"%"}))}))},submitAnswer:function(t,s){var e;!0!==this.questionAnswered&&(this.questionAnswered=!0,e=this,console.log("submit answer"),s.buttonEl.addClass("answered"),n.postWithPrefix(e.ajax_url+"/"+t,{},function(t){console.log("success! response = "),console.log(t),e.showAnswerGraph(t.poll_answers,t.total),!0===e.canReset&&e.resetButton.show(),null!==e.wrapperSectionEl&&n(e.wrapperSectionEl).find(".xmodule_ConditionalModule").each(function(t,s){new window.Conditional(s,e.id.replace(/^poll_/,""))})}))},submitReset:function(){var t;t=this,console.log("submit reset"),n.postWithPrefix(this.ajax_url+"/reset_poll",{},function(s){console.log("success! response = "),console.log(s),!0===s.hasOwnProperty("status")&&"string"==typeof s.status&&"success"===s.status.toLowerCase()&&(t.questionAnswered=!1,t.questionEl.find(".button.answered").removeClass("answered"),t.questionEl.find(".stats").hide(),t.resetButton.hide(),null!==t.wrapperSectionEl&&n(t.wrapperSectionEl).find(".xmodule_ConditionalModule").each(function(s,e){new window.Conditional(e,t.id.replace(/^poll_/,""))}))})},postInit:function(){var s;if(s=this,this.jsonConfig.poll_answer.length>0&&!1===this.jsonConfig.answers.hasOwnProperty(this.jsonConfig.poll_answer))return void t.append(this.questionEl,t.joinHtml(t.HTML("<h3>Error!</h3>"),t.HTML("<p>XML data format changed. List of answers was modified, but poll data was not updated.</p>")));this.id=this.questionEl.attr("id"),this.ajax_url=this.questionEl.data("ajax-url"),this.questionHtmlMarkup=n("<div />").html(t.HTML(this.jsonConfig.question).toString()).text(),this.questionEl.append(t.HTML(this.questionHtmlMarkup).toString()),this.questionAnswered=!1,this.answersObj={},this.shortVersion=!0,n.each(this.jsonConfig.answers,function(t,e){e.length>=18&&(s.shortVersion=!1)}),n.each(this.jsonConfig.answers,function(e,i){var l;l={},s.answersObj[e]=l,l.el=n('<div class="poll_answer"></div>'),l.questionEl=n('<div class="question"></div>'),l.buttonEl=n('<div class="button"></div>'),l.textEl=n('<div class="text"></div>'),l.questionEl.append(t.HTML(l.buttonEl).toString()),l.questionEl.append(t.HTML(l.textEl).toString()),l.el.append(t.HTML(l.questionEl).toString()),l.statsEl=n('<div class="stats"></div>'),l.barEl=n('<div class="bar"></div>'),l.percentEl=n('<div class="percent"></div>'),l.barEl.append(t.HTML(l.percentEl).toString()),l.numberEl=n('<div class="number"></div>'),l.statsEl.append(t.HTML(l.barEl).toString()),l.statsEl.append(t.HTML(l.numberEl).toString()),l.statsEl.hide(),l.el.append(t.HTML(l.statsEl).toString()),l.textEl.html(t.HTML(i).toString()),!0===s.shortVersion&&n.each(l,function(t,s){s instanceof o&&s.addClass("short")}),l.el.appendTo(s.questionEl),l.textEl.on("click",function(){s.submitAnswer(e,l)}),l.buttonEl.on("click",function(){s.submitAnswer(e,l)}),e===s.jsonConfig.poll_answer&&(l.buttonEl.addClass("answered"),s.questionAnswered=!0)}),console.log(this.jsonConfig.reset),"string"==typeof this.jsonConfig.reset&&"true"===this.jsonConfig.reset.toLowerCase()?(this.canReset=!0,this.resetButton=n('<div class="button reset-button">Change your vote</div>'),!1===this.questionAnswered&&this.resetButton.hide(),t.append(this.questionEl,this.resetButton),this.resetButton.on("click",function(){s.submitReset()})):this.canReset=!1,!0===this.questionAnswered&&this.showAnswerGraph(this.jsonConfig.poll_answers,this.jsonConfig.total)}},s}.apply(s,i))&&(t.exports=l)}).call(window)}).call(s,e(0),e(0))},15:function(t,s,e){e("./common/static/xmodule/modules/js/000-58032517f54c5c1a704a908d850cbe64.js"),e("./common/static/xmodule/modules/js/001-3918b2d4f383c04fed8227cc9f523d6e.js"),e("./common/static/xmodule/modules/js/002-8b615179a51250c4dc203f1daa97be63.js"),t.exports=e("./common/static/xmodule/modules/js/003-e9bdd6eeb6d44351f9504a2e45b3fa98.js")}},[15]));